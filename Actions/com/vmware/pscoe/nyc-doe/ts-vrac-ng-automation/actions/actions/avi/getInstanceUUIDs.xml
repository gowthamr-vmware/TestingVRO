<?xml version='1.0' encoding='UTF-8'?>
<dunes-script-module name="getInstanceUUIDs" result-type="Array/string" api-version="6.0.0" id="748d38d5-c80f-401d-8c0e-155749bf917f" version="1.0.0" allowed-operations="vef" category-name="com.vmware.pscoe.nyc-doe.ts-vrac-ng-automation.actions.actions.avi">
  <param n="ipAddresses" t="Array/string"><![CDATA[]]></param>
  <script encoded="false"><![CDATA[var __global = System.getContext() || (function () {
    return this;
}).call(null);
var VROES = __global.__VROES || (__global.__VROES = System.getModule("com.vmware.pscoe.library.ecmascript").VROES());
var Logger_1 = VROES.importLazy("com.vmware.pscoe.library.ts.logging/Logger");
var instanceUuids = [];
if (!ipAddresses) {
    return instanceUuids;
}
var logger = Logger_1._.Logger.getLogger("getInstanceUUIDs");
ipAddresses.forEach(function (ipAddress) {
    var vms = VcPlugin.getAllVirtualMachines(null, "xpath:matches(ipAddress, '" + ipAddress + "')");
    if (vms.length > 0) {
        var vm = vms[0];
        instanceUuids.push(vm.instanceId);
    }
    else {
        instanceUuids.push(ipAddress + ' - Not found');
    }
});

return instanceUuids;]]></script>
</dunes-script-module>