<?xml version='1.0' encoding='UTF-8'?>
<dunes-script-module name="WorkflowUtil" result-type="Any" api-version="6.0.0" id="42ecf6a0-c3e8-4787-8462-1320f96995f9" version="2.1.18" allowed-operations="vef" category-name="com.vmware.pscoe.library.ts.util">
  <script encoded="false"><![CDATA[var __global = System.getContext() || (function () {
    return this;
}).call(null);
var VROES = __global.__VROES || (__global.__VROES = System.getModule("com.vmware.pscoe.library.ecmascript").VROES()), exports = {};
/*
 * #%L
 * util
 * %%
 * Copyright (C) 2023 VMware, WWCC CoE
 * %%
 * This program is licensed under Technical Preview License by VMware.
 * VMware shall own and retain all right, title and interest in and to the Intellectual Property Rights in the Technology Preview Software.
 * ALL RIGHTS NOT EXPRESSLY GRANTED IN LICENSE ARE RESERVED TO VMWARE.
 * VMware is under no obligation to support the Technology Preview Software in any way or to provide any Updates to Licensee.
 * You should have received a copy of the Technical Preview License along with this program.  If not, see
 * <https://flings.vmware.com/vrealize-build-tools/license>
 * #L%
 */
var WorkflowUtil = /** @class */ (function () {
    function WorkflowUtil() {
    }
    WorkflowUtil.findByFqn = function (fqn, throwIfMissing) {
        var index = fqn.lastIndexOf("/");
        var workflowCategory = Server.getWorkflowCategoryWithPath(fqn.substring(0, index));
        if (workflowCategory) {
            var workflowName_1 = fqn.substring(index + 1);
            return VROES.Shims.arrayFind(workflowCategory.allWorkflows, function (workflow) { return workflow.name === workflowName_1; });
        }
        if (throwIfMissing) {
            throw new Error("Workflow '" + fqn + "' does not exist.");
        }
        return null;
    };
    WorkflowUtil.isAlive = function (token) {
        var state = typeof token === "string" ? Server.getWorkflowTokenState(token) : token.state;
        return ["failed", "completed", "canceled", "undefined", null].indexOf(state) < 0;
    };
    return WorkflowUtil;
}());
exports.WorkflowUtil = WorkflowUtil;
return exports;]]></script>
</dunes-script-module>