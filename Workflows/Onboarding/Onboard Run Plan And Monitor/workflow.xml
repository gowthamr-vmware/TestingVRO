<workflow xmlns="http://vmware.com/vco/workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://vmware.com/vco/workflow http://vmware.com/vco/workflow/Workflow-v4.xsd" root-name="item13" object-name="workflow:name=generic" id="0dd9d553-0f21-4c3d-8409-3f613c46a02e" version="1.0.0" api-version="6.0.0" allowed-operations="vef" editor-version="2.0" restartMode="1" resumeFromFailedMode="0"><display-name><![CDATA[Onboard Run Plan And Monitor]]></display-name><position y="50.0" x="40.0"/><input><param name="vraURL" type="string"/><param name="username" type="string"/><param name="password" type="SecureString"/><param name="inputSessionToken" type="string"/><param name="planID" type="string"/></input><attrib name="sessionToken" type="string" read-only="false"><value encoded="n"/></attrib><attrib name="sleepTime" type="number" read-only="false"><value encoded="n"><![CDATA[60.0]]></value></attrib><attrib name="planStatus" type="string" read-only="false"><value encoded="n"/></attrib><attrib name="counter" type="number" read-only="false"><value encoded="n"/></attrib><attrib name="maxRetry" type="number" read-only="false"><value encoded="n"><![CDATA[60.0]]></value></attrib><attrib name="err_0" type="string" read-only="false"><value encoded="n"><![CDATA[Plan still running after max retry]]></value></attrib><attrib name="err_1" type="string" read-only="false"><value encoded="n"><![CDATA[Onboarding plan failed]]></value></attrib><attrib name="runningPlanID" type="string" read-only="false"><value encoded="n"/></attrib><workflow-item name="item1" out-name="item2" type="link" linked-workflow-id="3f40bb50-7b54-4735-bfd5-74412624256a"><display-name><![CDATA[Get Or Create VRA Session Token]]></display-name><in-binding><bind name="vraURL" type="string" export-name="vraURL"/><bind name="username" type="string" export-name="username"/><bind name="password" type="SecureString" export-name="password"/><bind name="inputSessionToken" type="string" export-name="inputSessionToken"/></in-binding><out-binding><bind name="sessionToken" type="string" export-name="sessionToken"/></out-binding><description><![CDATA[]]></description><position y="60.0" x="220.0"/></workflow-item><workflow-item name="item2" out-name="item3" type="link" linked-workflow-id="dcb4d4e5-4dc0-47d6-9bd9-3440f0d9a4bb"><display-name><![CDATA[Run Plan]]></display-name><in-binding><bind name="vraURL" type="string" export-name="vraURL"/><bind name="username" type="string" export-name="username"/><bind name="password" type="SecureString" export-name="password"/><bind name="planID" type="string" export-name="planID"/><bind name="inputSessionToken" type="string" export-name="inputSessionToken"/></in-binding><out-binding><bind name="runningPlanID" type="string" export-name="runningPlanID"/></out-binding><description><![CDATA[]]></description><position y="60.0" x="340.0"/></workflow-item><workflow-item name="item3" prototype-id="sleep" out-name="item4" content-mode="x" type="task"><display-name><![CDATA[Sleep]]></display-name><script encoded="false"><![CDATA[//Auto-generated script
if ( sleepTime !== null )  {
	System.sleep(sleepTime * 1000);
}else  {
	throw "'sleepTime' is NULL"; 
}]]></script><in-binding><bind name="sleepTime" type="number" export-name="sleepTime"><description><![CDATA[Time to sleep in seconds]]></description></bind></in-binding><out-binding/><description><![CDATA[Sleep a given number of seconds.]]></description><position y="130.0" x="340.0"/></workflow-item><workflow-item name="item4" out-name="item6" type="link" linked-workflow-id="5b1b7a3f-9ced-4e16-85eb-f3176276995b"><display-name><![CDATA[Get Plan Status]]></display-name><in-binding><bind name="vraURL" type="string" export-name="vraURL"/><bind name="username" type="string" export-name="username"/><bind name="password" type="SecureString" export-name="password"/><bind name="planID" type="string" export-name="runningPlanID"/><bind name="inputSessionToken" type="string" export-name="sessionToken"/></in-binding><out-binding><bind name="planStatus" type="string" export-name="planStatus"/></out-binding><description><![CDATA[]]></description><position y="200.0" x="340.0"/></workflow-item><workflow-item name="item5" business-status="Onboarding Plan Failed On Status" throw-bind-name="err_1" type="end" end-mode="1"><in-binding/><position y="250.0" x="540.0"/></workflow-item><workflow-item name="item6" out-name="item7" type="custom-condition" alt-out-name="item10"><display-name><![CDATA[Decision]]></display-name><script encoded="false"><![CDATA[return (planStatus == 'STARTED');]]></script><in-binding><bind name="planStatus" type="string" export-name="planStatus"/></in-binding><out-binding/><description><![CDATA[Custom decision based on a custom script.]]></description><position y="190.0" x="220.0"/></workflow-item><workflow-item name="item7" prototype-id="increase-counter" out-name="item9" content-mode="x" type="task"><display-name><![CDATA[Increase counter]]></display-name><script encoded="false"><![CDATA[//Auto-generated script
counter = counter + 1;]]></script><in-binding><bind name="counter" type="number" export-name="counter"><description><![CDATA[Item to increase]]></description></bind></in-binding><out-binding><bind name="counter" type="number" export-name="counter"><description><![CDATA[Increased item]]></description></bind></out-binding><description><![CDATA[Increment a counter by one.]]></description><position y="200.0" x="100.0"/></workflow-item><workflow-item name="item8" throw-bind-name="err_0" type="end" end-mode="1"><in-binding/><position y="120.0" x="20.0"/></workflow-item><workflow-item name="item9" out-name="item3" type="custom-condition" alt-out-name="item8"><display-name><![CDATA[Decision]]></display-name><script encoded="false"><![CDATA[return (counter < maxRetry)]]></script><in-binding><bind name="counter" type="number" export-name="counter"/><bind name="maxRetry" type="number" export-name="maxRetry"/></in-binding><out-binding/><description><![CDATA[Custom decision based on a custom script.]]></description><position y="120.0" x="100.0"/></workflow-item><workflow-item name="item10" out-name="item12" type="task"><display-name><![CDATA[Log Status]]></display-name><script encoded="false"><![CDATA[System.log('Plan status ' + planStatus)]]></script><in-binding><bind name="planStatus" type="string" export-name="planStatus"/></in-binding><out-binding/><description><![CDATA[Simple task with custom script capability.]]></description><position y="260.0" x="220.0"/></workflow-item><workflow-item name="item11" business-status="Plan Completed" type="end" end-mode="0"><in-binding/><position y="310.0" x="400.0"/></workflow-item><workflow-item name="item12" out-name="item5" type="condition" alt-out-name="item11" comparator="0"><display-name><![CDATA[Decision]]></display-name><script encoded="false"><![CDATA[// Generated by the system, cannot be edited
return (planStatus === "FAILED");]]></script><in-binding><bind name="planStatus" type="string" export-name="planStatus"/></in-binding><out-binding/><condition name="planStatus" type="string" comparator="0" label="null">FAILED</condition><description><![CDATA[Custom decision based on a custom script.]]></description><position y="250.0" x="360.0"/></workflow-item><workflow-item name="item13" out-name="item1" type="task"><display-name><![CDATA[Scriptable task]]></display-name><script encoded="false"><![CDATA[System.log('Starting Onboard Run Plan And Monitor');]]></script><in-binding/><out-binding/><description><![CDATA[Simple task with custom script capability.]]></description><position y="60.0" x="90.0"/></workflow-item><presentation/></workflow>