<workflow xmlns="http://vmware.com/vco/workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://vmware.com/vco/workflow http://vmware.com/vco/workflow/Workflow-v4.xsd" root-name="item4" object-name="workflow:name=generic" id="d7da3054-9ac3-4720-a7c3-3142c7726dbb" version="1.0.0" api-version="6.0.0" allowed-operations="vef" editor-version="1.6" restartMode="1" resumeFromFailedMode="0"><display-name><![CDATA[Get disk Label vRA8]]></display-name><position y="127.22727272727272" x="105.0"/><input><param name="vm" type="VC:VirtualMachine"/><param name="vmUsername" type="string"/><param name="vmPassword" type="SecureString"/><param name="scriptConfigurationResource" type="ResourceElement"/><param name="customProperties" type="Properties"/></input><output><param name="scriptExitCodeOut" type="number"/><param name="scriptOutputTextOut" type="string"/></output><attrib name="DiskID" type="number" read-only="false"><value encoded="n"/></attrib><attrib name="scriptVariables" type="Array/CompositeType(stringToReplace:string,replacingString:string):scriptVariables" read-only="false"><value encoded="n"><![CDATA[[]]]></value></attrib><attrib name="DiskIDnumber" type="string" read-only="false"><value encoded="n"/></attrib><attrib name="DriveLabelNow" type="string" read-only="false"><value encoded="n"/></attrib><attrib name="DriveName" type="string" read-only="false"><value encoded="n"/></attrib><attrib name="DriveLetter" type="string" read-only="false"><value encoded="n"/></attrib><workflow-item name="item1" out-name="item6" type="task"><display-name><![CDATA[Get disk properties]]></display-name><script encoded="false"><![CDATA[DriveLabel = new Array();
DriveLabelToReplace = new Array();
System.log("this Disk ID is inside the script loop "+DiskID);
System.log("this Disk ID number is inside the script  loop "+DiskIDnumber);

var DriveLabelNow = customProperties.get("custom.diskLabel"+DiskIDnumber+".label");
var diskno =DiskID.toString();
if (DriveLabelNow && DriveLabelNow != ""){	
    DriveLabel.push(DriveLabelNow);
    DriveLabel.push(diskno);
}

var DriveName = customProperties.get("custom.diskLabel"+DiskIDnumber+".name");
	
var DriveLetter = customProperties.get("custom.diskLabel"+DiskIDnumber+".letter");
if (DriveLetter && DriveLetter != "")
    DriveLabel.push(DriveLetter);

var DriveLabeltoReplace = "DriveLabel";
var DriveNumbertoReplace = "@";
var DriveLettertoReplace = "*Letter*";
DriveLabelToReplace.push(DriveLabeltoReplace);
DriveLabelToReplace.push(DriveNumbertoReplace);
DriveLabelToReplace.push(DriveLettertoReplace);

System.log("Drive Name : "+DriveName+"Drive Letter : "+DriveLabel[2]+" Drive Label : "+DriveLabel[0]+" Drive Number : "+DriveLabel[1]);
System.log("Found Drive Label : "+DriveLabel[0]);
System.log("Found Drive Number : "+DriveLabel[1]);
System.log("Found Drive Letter : "+DriveLabel[2]);]]></script><in-binding><bind name="DiskID" type="number" export-name="DiskID"/><bind name="DiskIDnumber" type="string" export-name="DiskIDnumber"/><bind name="DriveLabelToReplace" type="Array/string" export-name="scriptVariables.stringToReplace"/><bind name="customProperties" type="Properties" export-name="customProperties"/></in-binding><out-binding><bind name="DriveLabel" type="Array/string" export-name="scriptVariables.replacingString"/><bind name="DriveLabelToReplace" type="Array/string" export-name="scriptVariables.stringToReplace"/><bind name="DriveLabelNow" type="string" export-name="DriveLabelNow"/><bind name="DriveName" type="string" export-name="DriveName"/><bind name="DriveLetter" type="string" export-name="DriveLetter"/></out-binding><description><![CDATA[Read Disk properties from vm]]></description><position y="137.22727272727272" x="484.5"/></workflow-item><workflow-item name="item2" out-name="item1" type="custom-condition" alt-out-name="item3"><display-name><![CDATA[Custom decision]]></display-name><script encoded="false"><![CDATA[return(DiskID<11);]]></script><in-binding><bind name="DiskID" type="number" export-name="DiskID"/><bind name="DiskIDnumber" type="string" export-name="DiskIDnumber"/></in-binding><out-binding/><position y="127.22727272727272" x="364.5"/></workflow-item><workflow-item name="item3" type="end" end-mode="0"><in-binding/><position y="190.86363636363635" x="404.5"/></workflow-item><workflow-item name="item4" out-name="item2" type="task"><display-name><![CDATA[DisID_initiate]]></display-name><script encoded="false"><![CDATA[DiskID=1;
DiskIDnumber=DiskID;
//System.log("Disk Id number in initiator =" +DiskIDnumber);]]></script><in-binding><bind name="DiskID" type="number" export-name="DiskID"/><bind name="DiskIDnumber" type="string" export-name="DiskIDnumber"/></in-binding><out-binding><bind name="DiskIDnumber" type="string" export-name="DiskIDnumber"/><bind name="DiskID" type="number" export-name="DiskID"/></out-binding><position y="137.22727272727272" x="224.5"/></workflow-item><workflow-item name="item5" out-name="item2" type="task"><display-name><![CDATA[Next Disk]]></display-name><script encoded="false"><![CDATA[DiskID=DiskID+1;
//System.log("Disk Id in counter addition is now =" +DiskID);
DiskIDnumber=DiskID;
//System.log("Disk Id number in counter addition is now =" +DiskIDnumber);]]></script><in-binding><bind name="DiskID" type="number" export-name="DiskID"/></in-binding><out-binding><bind name="DiskIDnumber" type="string" export-name="DiskIDnumber"/><bind name="DiskID" type="number" export-name="DiskID"/></out-binding><position y="40.0" x="760.0"/></workflow-item><workflow-item name="item0" out-name="item5" type="link" linked-workflow-id="24c23d4c-12be-4889-aa66-29b8a450f1cd"><display-name><![CDATA[Run script in VM guest]]></display-name><in-binding><bind name="vm" type="VC:VirtualMachine" export-name="vm"/><bind name="vmUsername" type="string" export-name="vmUsername"/><bind name="vmPassword" type="SecureString" export-name="vmPassword"/><bind name="scriptConfigurationResource" type="ResourceElement" export-name="scriptConfigurationResource"/><bind name="scriptVariables" type="Array/CompositeType(stringToReplace:string,replacingString:string):scriptVariables" export-name="scriptVariables"/></in-binding><out-binding><bind name="scriptExitCodeOut" type="number" export-name="scriptExitCodeOut"/><bind name="scriptOutputTextOut" type="string" export-name="scriptOutputTextOut"/></out-binding><description><![CDATA[Run a script in a guest using existing script configurations. Replaces variables in the script. Optionaly copy additional file and replace its variables as well.

If no working directory is specified:
- it is set to the guest default temp directory if there is a resource file copied
- it is set to default (c:\windows\system32 for Windows /root for Linux) if there is no resource file copied.]]></description><position y="137.22727272727272" x="764.5"/></workflow-item><workflow-item name="item6" out-name="item0" type="custom-condition" alt-out-name="item7"><display-name><![CDATA[check if the DriveName is null]]></display-name><script encoded="false"><![CDATA[return (DriveName !== null && DriveName !== "");]]></script><in-binding><bind name="DriveName" type="string" export-name="DriveName"/></in-binding><out-binding/><position y="127.22727272727272" x="624.5"/></workflow-item><workflow-item name="item7" type="end" end-mode="0"><in-binding/><position y="190.86363636363635" x="664.5"/></workflow-item><presentation><p-param name="vm"><desc><![CDATA[vm]]></desc></p-param><p-param name="vmUsername"><desc><![CDATA[vmUsername]]></desc></p-param><p-param name="vmPassword"><desc><![CDATA[vmPassword]]></desc></p-param><p-param name="scriptConfigurationResource"><desc><![CDATA[scriptConfigurationResource]]></desc></p-param></presentation></workflow>