<workflow xmlns="http://vmware.com/vco/workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://vmware.com/vco/workflow http://vmware.com/vco/workflow/Workflow-v4.xsd" root-name="item1" object-name="workflow:name=generic" id="dbfcbef0-b338-4369-8f87-579e12b741ae" version="1.0.0" api-version="6.0.0" allowed-operations="vef" restartMode="1" resumeFromFailedMode="0"><display-name><![CDATA[SCCM vRA8]]></display-name><description><![CDATA[Workflow template to use for vCAC extensibility

Input parameters can be used using vCAC VM properties using the format ExternalWFStubs.[workflow stub name].[vCO input parameter name]. If using plug-in types you need to pass their unique vCO IDs.

Input parameters was tested successfully with : 
- string
- plug-in input types
- number
- boolean]]></description><position y="45.90909090909091" x="125.0"/><input><param name="vm" type="VC:VirtualMachine"/><param name="machineDomain" type="string"/></input><output><param name="scriptExitCodeOut" type="number"/><param name="scriptOutputTextOut" type="string"/></output><attrib name="scriptVariables" type="Array/CompositeType(stringToReplace:string,replacingString:string):scriptVariables" read-only="false"><value encoded="n"/></attrib><attrib name="ExecuteSCCM" type="boolean" read-only="false"><value encoded="n"><![CDATA[true]]></value></attrib><workflow-item name="item5" type="end" end-mode="0"><in-binding/><position y="181.77272727272725" x="864.5"/></workflow-item><workflow-item name="item0" out-name="item2" type="custom-condition" alt-out-name="item3"><display-name><![CDATA[Custom decision]]></display-name><script encoded="false"><![CDATA[var AdDomain = machineDomain
var AdDomainString = AdDomain != null ? AdDomain.split(' ')[0] : "";
System.log("AdDomain from custom properties: " + AdDomainString); 
if (AdDomainString == "cstg.nstg.local") {
    System.log("Executing Install SCCM-STG Workflow ...");
    return false;
} else {
    System.log("Executing Install SCCM Workflow ...");
    return true;
}]]></script><in-binding><bind name="vm" type="VC:VirtualMachine" export-name="vm"/><bind name="machineDomain" type="string" export-name="machineDomain"/></in-binding><out-binding/><position y="27.227272727272727" x="364.5"/></workflow-item><workflow-item name="item2" out-name="item5" type="link" linked-workflow-id="cb61e9f2-aa70-457b-8f02-c21da4342d2a"><display-name><![CDATA[Install SCCM]]></display-name><in-binding><bind name="vm" type="VC:VirtualMachine" export-name="vm"/><bind name="scriptVariables" type="Array/CompositeType(stringToReplace:string,replacingString:string):scriptVariables" export-name="scriptVariables"/></in-binding><out-binding><bind name="scriptExitCodeOut" type="number" export-name="scriptExitCodeOut"/><bind name="scriptOutputTextOut" type="string" export-name="scriptOutputTextOut"/></out-binding><description><![CDATA[Run a script in a guest using existing script configurations. Replaces variables in the script. Optionaly copy additional file and replace its variables as well.

If no working directory is specified:
- it is set to the guest default temp directory if there is a resource file copied
- it is set to default (c:\windows\system32 for Windows /root for Linux) if there is no resource file copied.]]></description><position y="37.22727272727273" x="564.5"/></workflow-item><workflow-item name="item3" out-name="item5" type="link" linked-workflow-id="ab24a455-fd93-4ce0-9f41-3180f4e5f42f"><display-name><![CDATA[Install SCCM-STG]]></display-name><in-binding><bind name="vm" type="VC:VirtualMachine" export-name="vm"/><bind name="scriptVariables" type="Array/CompositeType(stringToReplace:string,replacingString:string):scriptVariables" export-name="scriptVariables"/></in-binding><out-binding><bind name="scriptExitCodeOut" type="number" export-name="scriptExitCodeOut"/><bind name="scriptOutputTextOut" type="string" export-name="scriptOutputTextOut"/></out-binding><description><![CDATA[Run a script in a guest using existing script configurations. Replaces variables in the script. Optionaly copy additional file and replace its variables as well.

If no working directory is specified:
- it is set to the guest default temp directory if there is a resource file copied
- it is set to default (c:\windows\system32 for Windows /root for Linux) if there is no resource file copied.]]></description><position y="91.77272727272727" x="564.5"/></workflow-item><workflow-item name="item1" out-name="item0" type="condition" alt-out-name="item5" comparator="0"><display-name><![CDATA[Execute SCCM Install]]></display-name><script encoded="false"><![CDATA[//Generated by the system, cannot be edited
return (ExecuteSCCM == true) ;]]></script><in-binding><bind name="ExecuteSCCM" type="boolean" export-name="ExecuteSCCM"/></in-binding><out-binding/><condition name="ExecuteSCCM" type="boolean" comparator="0" label="null">false</condition><position y="54.5" x="224.5"/></workflow-item><presentation><p-param name="vm"><desc><![CDATA[vm]]></desc></p-param></presentation></workflow>